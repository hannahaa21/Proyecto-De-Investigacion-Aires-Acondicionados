<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta charset="utf-8">
		<title>Agrega tu aire</title>
		<meta name="generator" content="Bootply" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<!--[if lt IE 9]>
			<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<link href="css/styles.css" rel="stylesheet">
                    <link rel="shortcut icon" href="img/icono.ico">

	</head>
	<body>
<!--login modal-->
<div id="loginModal" class="modal show" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
  <div class="modal-content">
      <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true" onclick="location.href='Usuario.html'">×</button>
          <h1 class="text-center">Ingresa la IP de tu aire</h1>
      </div>
      <div class="modal-body">
          <form class="form col-md-12 center-block">
            <div class="form-group">
                <input type="text" id="ipAire" class="form-control input-lg" placeholder="IP">
            </div>
            <div class="form-group">
                <input type="number" id="temper" class="form-control input-lg" placeholder="Temperatura deseada">
                <select id="seleccion">
                    <option value="C">Celsius</option>
                    <option value="F">Farenheit</option>
                    <option value="K">Kelvin</option>
                </select>
            </div>
            <div class="form-group">
                <h4>Tiempo de llegada</h4>
                <input type="time" id="tiempo" class="form-control input-lg">
            </div>
             
            
            <div class="form-group">
                <button class="btn btn-primary btn-lg btn-block" onclick= "location.href = '#/'+funcionIp() + '/ON';configAire()" >Configura tu aire</button>
              <span><a onclick= "funcionInfo()">Need help?</a></span>
              <script>
              function funcionIp()
              {
                var ip = document.getElementById("ipAire");
                var ipS = ip.value;
                var tempe = document.getElementById("temper");
                var tempeS = parseInt(tempe.value);
                var tiemp = document.getElementById("tiempo");
                var tiempS = tiemp.value;
                var selec = document.getElementById("seleccion");
                console.log(selec.value);
                if ((tempeS>32 || tempeS<10) && selec.value==="C")
                {
                    window.alert("Favor ingrese una temperatura entre 10°C y 35°C");
                    return 'ERROR'; 
                }
                if ((tempeS>90 || tempeS<50) && selec.value==="F")
                {
                    window.alert("Favor ingrese una temperatura entre 50°F y 90°F");
                    return 'ERROR'; 
                }
                if ((tempeS>306 || tempeS<284) && selec.value==="K")
                {
                    window.alert("Favor ingrese una temperatura entre 306K y 284K");
                    return 'ERROR'; 
                }
                var d = new Date();
                var h = parseInt(d.getHours());
                var m = parseInt(d.getMinutes());
                console.log(h+"..."+m);
                var tme= tiempS.split(":");
                console.log(tme[0]+"/"+tme[1]);
                var hrs = parseInt(tme[0]);
                var mins = parseInt(tme[1]);
                if(h>hrs)
                {
                    console.log("if 1");
                    window.alert("Favor ingrese una hora mayor a la actual");
                    return 'ERROR';
                }
                if (h===hrs)
                {
                    if (m>mins)
                    {
                        console.log("if 2");
                        window.alert("Favor ingrese una hora mayor a la actual");
                        return 'ERROR';
                    }
                    else
                    {
                        console.log("if 3");
                        return ipS+"/"+ tempeS+"/"+ h +":" +m  +"/"+ tiempS;    
                    }
                }
                if (h<hrs)
                {
                    console.log("if 4");
                    return ipS+"/"+ tempeS+"/"+ h +":" +m  +"/"+ tiempS;    
                }
              }
              
              function configAire()
              {
                  window.alert("Se esta configurando tu aire, cuando este listo regresa a la pagina principal");
              }
                    function funcionInfo()
                  {
                      window.alert("Ingrese la IP de su computador, la puede conseguir por medio de la consola del computador con el comando ipConfig (windows), en este copie el numero que aparece en IPv4 Address. ademas de esto ingrese la temperatura deseada y su tiempo de llegada");
                  }
              </script>
            </div>
          </form>
      </div>
      <div class="modal-footer">
          <div class="col-md-12">
              <button class="btn" data-dismiss="modal" aria-hidden="true" onclick="location.href ='Usuario.html'">Cancel</button>
		  </div>	
      </div>
  </div>
  </div>
</div>
	<!-- script references -->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
	</body>
</html>